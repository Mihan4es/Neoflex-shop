"use strict";var e=document.querySelector(".header__cart-sum"),t=[],a=window.sessionStorage.getItem("cart");if(null==JSON.parse(a)?e.innerHTML=0:(e.innerHTML=JSON.parse(a).length,t=JSON.parse(a)),document.querySelector(".catalog")){var n=document.querySelector(".catalog__container"),r=function(a,r){var c=document.createElement("h2");c.classList.add("catalog__title"),c.textContent=a;var s=document.createElement("ul");s.classList.add("catalog__list"),r.forEach((function(a,n){var r=document.createElement("li");r.classList.add("card","catalog__item");var c=document.createElement("div");c.classList.add("card__img-container");var i=document.createElement("img");i.classList.add("card__img"),i.setAttribute("src",a.img),i.setAttribute("alt",a.title);var d=document.createElement("div");d.classList.add("card__description");var o=document.createElement("div");o.classList.add("card__description-top");var l=document.createElement("h3");l.classList.add("card__name"),l.textContent=a.title;var p=document.createElement("div");p.classList.add("card__price");var m=document.createElement("div");if(m.classList.add("card__price-new"),m.textContent=a.price+" ₽",p.append(m),a.price_old){var u=document.createElement("div");u.classList.add("card__price-old"),u.textContent=a.price_old+" ₽",p.append(u)}var _=document.createElement("div");_.classList.add("card__description-bottom");var v=document.createElement("div");v.classList.add("card__rating");var g=document.createElement("div");g.classList.add("card__rating-star");var E=document.createElement("img");E.setAttribute("src","./images/sprite.svg#star");var L=document.createElement("span");L.textContent=a.rate;var f=document.createElement("button");f.classList.add("card__buy"),f.textContent="Купить";for(var S=0;S<t.length;S++)t[S].id===n&&(f.setAttribute("disabled",!0),f.textContent="В корзине");f.addEventListener("click",(function(r){r.preventDefault(),f.setAttribute("disabled",!0),f.textContent="В корзине",a.id=n,a.sum=1,t.push(a),window.sessionStorage.setItem("cart",JSON.stringify(t));var c=window.sessionStorage.getItem("cart");e.innerHTML=JSON.parse(c).length})),r.append(c),c.append(i),r.append(d),d.append(o),o.append(l),o.append(p),d.append(_),_.append(v),v.append(g),g.append(E),v.append(L),_.append(f),s.append(r)})),n.append(c),n.append(s)};r("Наушники",[{img:"./images/Apple_BYZ_S852I.png",title:"Apple BYZ S852I",price_old:3527,price:2927,rate:4.7},{img:"./images/Apple_EarPods.png",title:"Apple EarPods",price:2327,rate:4.5},{img:"./images/Apple_EarPods2.png",title:"Apple EarPods",price:2327,rate:4.5},{img:"./images/Apple_BYZ_S852I.png",title:"Apple BYZ S852I",price:2927,rate:4.7},{img:"./images/Apple_EarPods.png",title:"Apple EarPods",price:2327,rate:4.5},{img:"./images/Apple_EarPods2.png",title:"Apple EarPods",price:2327,rate:4.5}]),r("Беспроводные наушники",[{img:"./images/Apple_AirPods.png",title:"Apple AirPods",price:9527,rate:4.7},{img:"./images/GERLAX_GH-04.png",title:"GERLAX GH-04",price:6527,rate:4.7},{img:"./images/BOROFONE_BO4.png",title:"BOROFONE BO4",price:7527,rate:4.7}])}if(document.querySelector(".cart")){var c=document.querySelector(".cart__left"),s=document.querySelector(".cart__result-sum"),i=JSON.parse(a);if(window.sessionStorage.setItem("cart",JSON.stringify(i)),null===JSON.parse(a)||0===JSON.parse(a).length){var d=document.createElement("p");d.classList.add("cart__none"),d.textContent="Корзина пуста",c.append(d),s.textContent="0 ₽"}else{var o=function(){var e=document.querySelector(".cart__result-sum"),t=document.querySelectorAll(".cart__item-result"),a=0;t.forEach((function(e){a+=Number(e.textContent.replace("₽",""))})),e.textContent="₽ "+a};(i=i.filter((function(e){return null!=e}))).forEach((function(e,t){var a=document.createElement("li");a.classList.add("cart__item");var n=document.createElement("div");n.classList.add("cart__item-top");var r=document.createElement("img");r.classList.add("cart__img"),r.setAttribute("src",e.img),r.setAttribute("alt",e.title);var s=document.createElement("div");s.classList.add("cart__description");var d=document.createElement("p");d.classList.add("cart__item-description"),d.textContent=e.title;var l=document.createElement("span");l.classList.add("cart__item-price"),l.textContent=e.price+" ₽";var p=document.createElement("div");p.classList.add("cart__item-bottom");var m=document.createElement("div");m.classList.add("cart__item-btns");var u=document.createElement("button");u.classList.add("cart__btn-sum","cart__btn-sum--minus");var _=document.createElement("span");_.classList.add("cart__quantity"),_.textContent=e.sum;var v=document.createElement("button");v.classList.add("cart__btn-sum","cart__btn-sum--plus");var g=document.createElement("span");g.classList.add("cart__item-result"),g.textContent=e.price+" ₽";var E=document.createElement("button");E.classList.add("cart__item-del");var L=document.createElement("div");L.classList.add("cart__trash");var f=document.createElement("img");f.setAttribute("src","images/sprite.svg#trash"),u.addEventListener("click",(function(a){a.preventDefault(),e.sum<=1||(_.textContent=e.sum-1,i[t].sum=e.sum-1,window.sessionStorage.setItem("cart",JSON.stringify(i)),g.textContent=e.price*Number(_.textContent)+" ₽",o())})),v.addEventListener("click",(function(a){a.preventDefault(),_.textContent=e.sum+1,i[t].sum=e.sum+1,window.sessionStorage.setItem("cart",JSON.stringify(i)),g.textContent=e.price*Number(_.textContent)+" ₽",o()})),E.addEventListener("click",(function(e){e.preventDefault(),delete i[t],window.sessionStorage.setItem("cart",JSON.stringify(i)),a.remove(),o()})),n.append(r),n.append(s),s.append(d),s.append(l),p.append(m),m.append(u),m.append(_),m.append(v),p.append(g),E.append(L),L.append(f),a.append(n),a.append(p),a.append(E),c.append(a),o()}))}document.querySelector(".cart__submit").addEventListener("click",(function(e){e.preventDefault();var t=0,a=document.querySelectorAll(".cart__item"),n=document.querySelector(".header__cart-sum");console.log("Форма отправлена с товарами:"),i.forEach((function(e){console.log(e.title+": "+e.sum+"шт. на сумму "+e.price*e.sum+" ₽"),t+=e.sum*e.price})),console.log("Итог: "+t+" ₽"),a.forEach((function(e){e.remove()}));var r=document.createElement("p");r.textContent="Корзина пуста",r.classList.add("cart__none"),c.append(r),n.textContent=0,s.textContent="0 ₽",sessionStorage.removeItem("cart")}))}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiY2FydFN1bUljb24iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJzdG9yYWdlIiwic2Vzc2lvblN0b3JhZ2VDYXJ0Iiwid2luZG93Iiwic2Vzc2lvblN0b3JhZ2UiLCJnZXRJdGVtIiwiSlNPTiIsInBhcnNlIiwiaW5uZXJIVE1MIiwibGVuZ3RoIiwiY2F0YWxvZ0NvbnRhaW5lciIsImNvbnRhaW5lckNhdGVnb3J5IiwidGl0bGUiLCJjb250ZW50IiwiaDIiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwidGV4dENvbnRlbnQiLCJjYXRhbG9nTGlzdCIsImZvckVhY2giLCJpdGVtIiwiaW5kZXgiLCJjYXJkIiwiaW1nQ29udGFpbmVyIiwiY2FyZEltZyIsInNldEF0dHJpYnV0ZSIsImltZyIsImNhcmREZXNjcmlwdGlvbiIsImNhcmREZXNjcmlwdGlvblRvcCIsImNhcmROYW1lIiwiY2FyZFByaWNlIiwiY2FyZFByaWNlTmV3IiwicHJpY2UiLCJhcHBlbmQiLCJwcmljZV9vbGQiLCJjYXJkUHJpY2VPbGQiLCJjYXJkRGVzY3JpcHRpb25Cb3R0b20iLCJjYXJkUmF0aW5nIiwic3ZnU3RhciIsInN2Z1VzZSIsInNwYW5SYXRpbmciLCJyYXRlIiwiY2FyZEJ1eSIsImkiLCJpZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwicHJldmVudERlZmF1bHQiLCJzdW0iLCJwdXNoIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsImNvbnRhaW5lciIsImNhcnRSZXN1bHRTdW0iLCJjYXJ0U3RvcmFnZUFycmF5IiwibWVzc2FnZU51bGwiLCJyZXN1bHRGdW5jdGlvbiIsInJlc3VsdFN1bSIsIml0ZW1SZXN1bHQiLCJxdWVyeVNlbGVjdG9yQWxsIiwic3VtUmVzdWx0IiwiTnVtYmVyIiwicmVwbGFjZSIsImZpbHRlciIsIm4iLCJjYXJ0SXRlbSIsImNhcnRJdGVtVG9wIiwiY2FydEltZyIsImNhcnREZXNjcmlwdGlvbiIsImNhcnREZXNjcmlwdGlvblRleHQiLCJjYXJ0RGVzY3JpcHRpb25QcmljZSIsImNhcnRJdGVtQm90dG9tIiwiY2FydEl0ZW1CdG5zIiwiY2FydEJ0bk1pbnVzIiwiY2FydFF1YW50aXR5IiwiY2FydEJ0blBsdXMiLCJjYXJ0SXRlbVJlc3VsdCIsImRlbGV0ZUJ0biIsInN2Z0RlbGV0ZSIsInVzZURlbGV0ZSIsInJlbW92ZSIsImZ1bGxQcmljZSIsImNhcnRJY29uIiwiY29uc29sZSIsImxvZyIsInJlbW92ZUl0ZW0iXSwibWFwcGluZ3MiOiJhQUFBLElBNERNQSxFQUFjQyxTQUFTQyxjQUFjLHFCQUN2Q0MsRUFBVSxHQUNSQyxFQUFxQkMsT0FBT0MsZUFBZUMsUUFBUSxRQVF6RCxHQVBzQyxNQUFsQ0MsS0FBS0MsTUFBTUwsR0FDYkosRUFBWVUsVUFBWSxHQUV4QlYsRUFBWVUsVUFBWUYsS0FBS0MsTUFBTUwsR0FBb0JPLE9BQ3ZEUixFQUFVSyxLQUFLQyxNQUFNTCxJQUduQkgsU0FBU0MsY0FBYyxZQUFhLENBQ3RDLElBQU1VLEVBQW1CWCxTQUFTQyxjQUFjLHVCQUUxQ1csRUFBb0IsU0FBQ0MsRUFBT0MsR0FDaEMsSUFBTUMsRUFBS2YsU0FBU2dCLGNBQWMsTUFDbENELEVBQUdFLFVBQVVDLElBQUksa0JBQ2pCSCxFQUFHSSxZQUFjTixFQUVqQixJQUFNTyxFQUFjcEIsU0FBU2dCLGNBQWMsTUFDM0NJLEVBQVlILFVBQVVDLElBQUksaUJBRTFCSixFQUFRTyxTQUFRLFNBQUNDLEVBQU1DLEdBQ3JCLElBQU1DLEVBQU94QixTQUFTZ0IsY0FBYyxNQUNwQ1EsRUFBS1AsVUFBVUMsSUFBSSxPQUFRLGlCQUUzQixJQUFNTyxFQUFlekIsU0FBU2dCLGNBQWMsT0FDNUNTLEVBQWFSLFVBQVVDLElBQUksdUJBRTNCLElBQU1RLEVBQVUxQixTQUFTZ0IsY0FBYyxPQUN2Q1UsRUFBUVQsVUFBVUMsSUFBSSxhQUN0QlEsRUFBUUMsYUFBYSxNQUFPTCxFQUFLTSxLQUNqQ0YsRUFBUUMsYUFBYSxNQUFPTCxFQUFL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QWF2QyxPQUFPeUMsR0FDcEJGLEVBQWF2QyxPQUFPMEMsR0FDcEJKLEVBQWV0QyxPQUFPMkMsR0FFdEJDLEVBQVU1QyxPQUFPNkMsR0FDakJBLEVBQVU3QyxPQUFPOEMsR0FFakJkLEVBQVNoQyxPQUFPaUMsR0FDaEJELEVBQVNoQyxPQUFPc0MsR0FDaEJOLEVBQVNoQyxPQUFPNEMsR0FDaEJ6QixFQUFVbkIsT0FBT2dDLEdBQ2pCVCxPQWVlMUQsU0FBU0MsY0FBYyxpQkFFL0I4QyxpQkFBaUIsU0FBUyxTQUFDQyxHQUNwQ0EsRUFBRUMsaUJBQ0YsSUFBSWtDLEVBQVksRUFDVmhCLEVBQVduRSxTQUFTNkQsaUJBQWlCLGVBQ3JDdUIsRUFBV3BGLFNBQVNDLGNBQWMscUJBQ3hDb0YsUUFBUUMsSUFBSSxnQ0FDWjlCLEVBQWlCbkMsU0FBUSxTQUFBQyxHQUN2QitELFFBQVFDLElBQUloRSxFQUFLVCxNQUFRLEtBQU9TLEVBQUs0QixJQUFNLGdCQUFtQjVCLEVBQUtZLE1BQVFaLEVBQUs0QixJQUFPLE1BQ3ZGaUMsR0FBeUI3RCxFQUFLNEIsSUFBTTVCLEVBQUtZLFNBRTNDbUQsUUFBUUMsSUFBSSxTQUFXSCxFQUFZLE1BQ25DaEIsRUFBUzlDLFNBQVEsU0FBQUMsR0FDZkEsRUFBSzRELFlBRVAsSUFBTXpCLEVBQWN6RCxTQUFTZ0IsY0FBYyxLQUMzQ3lDLEVBQVl0QyxZQUFjLGdCQUMxQnNDLEVBQVl4QyxVQUFVQyxJQUFJLGNBQzFCb0MsRUFBVW5CLE9BQU9zQixHQUNqQjJCLEVBQVNqRSxZQUFjLEVBQ3ZCb0MsRUFBY3BDLFlBQWMsTUFDNUJkLGVBQWVrRixXQUFXIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGhlYWRwaG9uZXMgPSBbXG4gIHtcbiAgICBpbWc6IFwiLi9pbWFnZXMvQXBwbGVfQllaX1M4NTJJLnBuZ1wiLFxuICAgIHRpdGxlOiBcIkFwcGxlIEJZWiBTODUySVwiLFxuICAgIHByaWNlX29sZDogMzUyNyxcbiAgICBwcmljZTogMjkyNyxcbiAgICByYXRlOiA0LjcsXG4gIH0sXG4gIHtcbiAgICBpbWc6IFwiLi9pbWFnZXMvQXBwbGVfRWFyUG9kcy5wbmdcIixcbiAgICB0aXRsZTogXCJBcHBsZSBFYXJQb2RzXCIsXG4gICAgcHJpY2U6IDIzMjcsXG4gICAgcmF0ZTogNC41LFxuICB9LFxuICB7XG4gICAgaW1nOiBcIi4vaW1hZ2VzL0FwcGxlX0VhclBvZHMyLnBuZ1wiLFxuICAgIHRpdGxlOiBcIkFwcGxlIEVhclBvZHNcIixcbiAgICBwcmljZTogMjMyNyxcbiAgICByYXRlOiA0LjUsXG4gIH0sXG4gIHtcbiAgICBpbWc6IFwiLi9pbWFnZXMvQXBwbGVfQllaX1M4NTJJLnBuZ1wiLFxuICAgIHRpdGxlOiBcIkFwcGxlIEJZWiBTODUySVwiLFxuICAgIHByaWNlOiAyOTI3LFxuICAgIHJhdGU6IDQuNyxcbiAgfSxcbiAge1xuICAgIGltZzogXCIuL2ltYWdlcy9BcHBsZV9FYXJQb2RzLnBuZ1wiLFxuICAgIHRpdGxlOiBcIkFwcGxlIEVhclBvZHNcIixcbiAgICBwcmljZTogMjMyNyxcbiAgICByYXRlOiA0LjUsXG4gIH0sXG4gIHtcbiAgICBpbWc6IFwiLi9pbWFnZXMvQXBwbGVfRWFyUG9kczIucG5nXCIsXG4gICAgdGl0bGU6IFwiQXBwbGUgRWFyUG9kc1wiLFxuICAgIHByaWNlOiAyMzI3LFxuICAgIHJhdGU6IDQuNSxcbiAgfSxcbl07XG5cbmNvbnN0IHdpcmVsZXNzSGVhZHBob25lcyA9IFtcbiAge1xuICAgIGltZzogXCIuL2ltYWdlcy9BcHBsZV9BaXJQb2RzLnBuZ1wiLFxuICAgIHRpdGxlOiBcIkFwcGxlIEFpclBvZHNcIixcbiAgICBwcmljZTogOTUyNyxcbiAgICByYXRlOiA0LjcsXG4gIH0sXG4gIHtcbiAgICBpbWc6IFwiLi9pbWFnZXMvR0VSTEFYX0dILTA0LnBuZ1wiLFxuICAgIHRpdGxlOiBcIkdFUkxBWCBHSC0wNFwiLFxuICAgIHByaWNlOiA2NTI3LFxuICAgIHJhdGU6IDQuNyxcbiAgfSxcbiAge1xuICAgIGltZzogXCIuL2ltYWdlcy9CT1JPRk9ORV9CTzQucG5nXCIsXG4gICAgdGl0bGU6IFwiQk9ST0ZPTkUgQk80XCIsXG4gICAgcHJpY2U6IDc1MjcsXG4gICAgcmF0ZTogNC43LFxuICB9LFxuXTtcbmNvbnN0IGNhcnRTdW1JY29uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9fY2FydC1zdW0nKTtcbmxldCBzdG9yYWdlID0gW107XG5jb25zdCBzZXNzaW9uU3RvcmFnZUNhcnQgPSB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnY2FydCcpO1xuaWYgKEpTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2VDYXJ0KSA9PSBudWxsKSB7XG4gIGNhcnRTdW1JY29uLmlubmVySFRNTCA9IDA7XG59IGVsc2Uge1xuICBjYXJ0U3VtSWNvbi5pbm5lckhUTUwgPSBKU09OLnBhcnNlKHNlc3Npb25TdG9yYWdlQ2FydCkubGVuZ3RoO1xuICBzdG9yYWdlID0gSlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZUNhcnQpXG59XG5cbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2F0YWxvZycpKSB7XG4gIGNvbnN0IGNhdGFsb2dDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2F0YWxvZ19fY29udGFpbmVyJyk7XG5cbiAgY29uc3QgY29udGFpbmVyQ2F0ZWdvcnkgPSAodGl0bGUsIGNvbnRlbnQpID0+IHtcbiAgICBjb25zdCBoMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gyJylcbiAgICBoMi5jbGFzc0xpc3QuYWRkKCdjYXRhbG9nX190aXRsZScpO1xuICAgIGgyLnRleHRDb250ZW50ID0gdGl0bGU7XG5cbiAgICBjb25zdCBjYXRhbG9nTGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7XG4gICAgY2F0YWxvZ0xpc3QuY2xhc3NMaXN0LmFkZCgnY2F0YWxvZ19fbGlzdCcpO1xuXG4gICAgY29udGVudC5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xuICAgICAgY29uc3QgY2FyZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgICBjYXJkLmNsYXNzTGlzdC5hZGQoJ2NhcmQnLCAnY2F0YWxvZ19faXRlbScpO1xuXG4gICAgICBjb25zdCBpbWdDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIGltZ0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdjYXJkX19pbWctY29udGFpbmVyJyk7XG5cbiAgICAgIGNvbnN0IGNhcmRJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICAgIGNhcmRJbWcuY2xhc3NMaXN0LmFkZCgnY2FyZF9faW1nJyk7XG4gICAgICBjYXJkSW1nLnNldEF0dHJpYnV0ZSgnc3JjJywgaXRlbS5pbWcpO1xuICAgICAgY2FyZEltZy5zZXRBdHRyaWJ1dGUoJ2FsdCcsIGl0ZW0udGl0bGUpO1xuXG4gICAgICBjb25zdCBjYXJkRGVzY3JpcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIGNhcmREZXNjcmlwdGlvbi5jbGFzc0xpc3QuYWRkKCdjYXJkX19kZXNjcmlwdGlvbicpO1xuXG4gICAgICBjb25zdCBjYXJkRGVzY3JpcHRpb25Ub3AgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIGNhcmREZXNjcmlwdGlvblRvcC5jbGFzc0xpc3QuYWRkKCdjYXJkX19kZXNjcmlwdGlvbi10b3AnKTtcblxuICAgICAgY29uc3QgY2FyZE5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMycpO1xuICAgICAgY2FyZE5hbWUuY2xhc3NMaXN0LmFkZCgnY2FyZF9fbmFtZScpO1xuICAgICAgY2FyZE5hbWUudGV4dENvbnRlbnQgPSBpdGVtLnRpdGxlO1xuXG4gICAgICBjb25zdCBjYXJkUHJpY2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIGNhcmRQcmljZS5jbGFzc0xpc3QuYWRkKCdjYXJkX19wcmljZScpO1xuXG4gICAgICBjb25zdCBjYXJkUHJpY2VOZXcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIGNhcmRQcmljZU5ldy5jbGFzc0xpc3QuYWRkKCdjYXJkX19wcmljZS1uZXcnKTtcbiAgICAgIGNhcmRQcmljZU5ldy50ZXh0Q29udGVudCA9IGl0ZW0ucHJpY2UgKyAnIOKCvSc7XG4gICAgICBjYXJkUHJpY2UuYXBwZW5kKGNhcmRQcmljZU5ldyk7XG5cbiAgICAgIGlmIChpdGVtLnByaWNlX29sZCkge1xuICAgICAgICBjb25zdCBjYXJkUHJpY2VPbGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgY2FyZFByaWNlT2xkLmNsYXNzTGlzdC5hZGQoJ2NhcmRfX3ByaWNlLW9sZCcpO1xuICAgICAgICBjYXJkUHJpY2VPbGQudGV4dENvbnRlbnQgPSBpdGVtLnByaWNlX29sZCArICcg4oK9JztcbiAgICAgICAgY2FyZFByaWNlLmFwcGVuZChjYXJkUHJpY2VPbGQpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjYXJkRGVzY3JpcHRpb25Cb3R0b20gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIGNhcmREZXNjcmlwdGlvbkJvdHRvbS5jbGFzc0xpc3QuYWRkKCdjYXJkX19kZXNjcmlwdGlvbi1ib3R0b20nKTtcblxuICAgICAgY29uc3QgY2FyZFJhdGluZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgY2FyZFJhdGluZy5jbGFzc0xpc3QuYWRkKCdjYXJkX19yYXRpbmcnKTtcblxuICAgICAgY29uc3Qgc3ZnU3RhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgc3ZnU3Rhci5jbGFzc0xpc3QuYWRkKCdjYXJkX19yYXRpbmctc3RhcicpO1xuXG4gICAgICBjb25zdCBzdmdVc2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICAgIHN2Z1VzZS5zZXRBdHRyaWJ1dGUoJ3NyYycsICcuL2ltYWdlcy9zcHJpdGUuc3ZnI3N0YXInKTtcblxuICAgICAgY29uc3Qgc3BhblJhdGluZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgIHNwYW5SYXRpbmcudGV4dENvbnRlbnQgPSBpdGVtLnJhdGU7XG5cbiAgICAgIGNvbnN0IGNhcmRCdXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgIGNhcmRCdXkuY2xhc3NMaXN0LmFkZCgnY2FyZF9fYnV5Jyk7XG4gICAgICBjYXJkQnV5LnRleHRDb250ZW50ID0gJ9Ca0YPQv9C40YLRjCc7XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RvcmFnZS5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoc3RvcmFnZVtpXS5pZCA9PT0gaW5kZXgpIHtcbiAgICAgICAgICBjYXJkQnV5LnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCB0cnVlKTtcbiAgICAgICAgICBjYXJkQnV5LnRleHRDb250ZW50ID0gJ9CSINC60L7RgNC30LjQvdC1JztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjYXJkQnV5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBjYXJkQnV5LnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCB0cnVlKTtcbiAgICAgICAgY2FyZEJ1eS50ZXh0Q29udGVudCA9ICfQkiDQutC+0YDQt9C40L3QtSc7XG4gICAgICAgIGl0ZW0uaWQgPSBpbmRleDtcbiAgICAgICAgaXRlbS5zdW0gPSAxO1xuICAgICAgICBzdG9yYWdlLnB1c2goaXRlbSk7XG4gICAgICAgIHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdjYXJ0JywgSlNPTi5zdHJpbmdpZnkoc3RvcmFnZSkpO1xuXG4gICAgICAgIGNvbnN0IHNlc3Npb25TdG9yYWdlQ2FydCA9IHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdjYXJ0Jyk7XG4gICAgICAgIGNhcnRTdW1JY29uLmlubmVySFRNTCA9IEpTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2VDYXJ0KS5sZW5ndGg7XG4gICAgICB9KVxuXG4gICAgICBjYXJkLmFwcGVuZChpbWdDb250YWluZXIpXG4gICAgICBpbWdDb250YWluZXIuYXBwZW5kKGNhcmRJbWcpO1xuICAgICAgY2FyZC5hcHBlbmQoY2FyZERlc2NyaXB0aW9uKTtcbiAgICAgIGNhcmREZXNjcmlwdGlvbi5hcHBlbmQoY2FyZERlc2NyaXB0aW9uVG9wKTtcbiAgICAgIGNhcmREZXNjcmlwdGlvblRvcC5hcHBlbmQoY2FyZE5hbWUpO1xuICAgICAgY2FyZERlc2NyaXB0aW9uVG9wLmFwcGVuZChjYXJkUHJpY2UpO1xuICAgICAgY2FyZERlc2NyaXB0aW9uLmFwcGVuZChjYXJkRGVzY3JpcHRpb25Cb3R0b20pO1xuICAgICAgY2FyZERlc2NyaXB0aW9uQm90dG9tLmFwcGVuZChjYXJkUmF0aW5nKTtcbiAgICAgIGNhcmRSYXRpbmcuYXBwZW5kKHN2Z1N0YXIpO1xuICAgICAgc3ZnU3Rhci5hcHBlbmQoc3ZnVXNlKTtcbiAgICAgIGNhcmRSYXRpbmcuYXBwZW5kKHNwYW5SYXRpbmcpO1xuICAgICAgY2FyZERlc2NyaXB0aW9uQm90dG9tLmFwcGVuZChjYXJkQnV5KTtcblxuICAgICAgY2F0YWxvZ0xpc3QuYXBwZW5kKGNhcmQpO1xuICAgIH0pXG5cbiAgICBjYXRhbG9nQ29udGFpbmVyLmFwcGVuZChoMik7XG4gICAgY2F0YWxvZ0NvbnRhaW5lci5hcHBlbmQoY2F0YWxvZ0xpc3QpO1xuICB9XG5cbiAgY29udGFpbmVyQ2F0ZWdvcnkoJ9Cd0LDRg9GI0L3QuNC60LgnLCBoZWFkcGhvbmVzKTtcbiAgY29udGFpbmVyQ2F0ZWdvcnkoJ9CR0LXRgdC/0YDQvtCy0L7QtNC90YvQtSDQvdCw0YPRiNC90LjQutC4Jywgd2lyZWxlc3NIZWFkcGhvbmVzKTtcbn1cblxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJ0JykpIHtcbiAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhcnRfX2xlZnQnKTtcbiAgY29uc3QgY2FydFJlc3VsdFN1bSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJ0X19yZXN1bHQtc3VtJyk7XG4gIGxldCBjYXJ0U3RvcmFnZUFycmF5ID0gSlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZUNhcnQpO1xuXG4gIHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdjYXJ0JywgSlNPTi5zdHJpbmdpZnkoY2FydFN0b3JhZ2VBcnJheSkpO1xuICBpZiAobnVsbCA9PT0gSlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZUNhcnQpIHx8IEpTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2VDYXJ0KS5sZW5ndGggPT09IDApIHtcbiAgICBjb25zdCBtZXNzYWdlTnVsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICBtZXNzYWdlTnVsbC5jbGFzc0xpc3QuYWRkKCdjYXJ0X19ub25lJyk7XG4gICAgbWVzc2FnZU51bGwudGV4dENvbnRlbnQgPSAn0JrQvtGA0LfQuNC90LAg0L/Rg9GB0YLQsCdcbiAgICBjb250YWluZXIuYXBwZW5kKG1lc3NhZ2VOdWxsKTtcbiAgICBjYXJ0UmVzdWx0U3VtLnRleHRDb250ZW50ID0gJzAg4oK9JztcbiAgfSBlbHNlIHtcbiAgICBjYXJ0U3RvcmFnZUFycmF5ID0gY2FydFN0b3JhZ2VBcnJheS5maWx0ZXIoKG4pID0+IHtcbiAgICAgIHJldHVybiBuICE9IG51bGxcbiAgICB9KTtcbiAgICBjYXJ0U3RvcmFnZUFycmF5LmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7XG5cbiAgICAgIGNvbnN0IGNhcnRJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICAgIGNhcnRJdGVtLmNsYXNzTGlzdC5hZGQoJ2NhcnRfX2l0ZW0nKTtcblxuICAgICAgY29uc3QgY2FydEl0ZW1Ub3AgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIGNhcnRJdGVtVG9wLmNsYXNzTGlzdC5hZGQoJ2NhcnRfX2l0ZW0tdG9wJyk7XG5cbiAgICAgIGNvbnN0IGNhcnRJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICAgIGNhcnRJbWcuY2xhc3NMaXN0LmFkZCgnY2FydF9faW1nJyk7XG4gICAgICBjYXJ0SW1nLnNldEF0dHJpYnV0ZSgnc3JjJywgaXRlbS5pbWcpO1xuICAgICAgY2FydEltZy5zZXRBdHRyaWJ1dGUoJ2FsdCcsIGl0ZW0udGl0bGUpO1xuXG4gICAgICBjb25zdCBjYXJ0RGVzY3JpcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIGNhcnREZXNjcmlwdGlvbi5jbGFzc0xpc3QuYWRkKCdjYXJ0X19kZXNjcmlwdGlvbicpO1xuXG4gICAgICBjb25zdCBjYXJ0RGVzY3JpcHRpb25UZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgICAgY2FydERlc2NyaXB0aW9uVGV4dC5jbGFzc0xpc3QuYWRkKCdjYXJ0X19pdGVtLWRlc2NyaXB0aW9uJyk7XG4gICAgICBjYXJ0RGVzY3JpcHRpb25UZXh0LnRleHRDb250ZW50ID0gaXRlbS50aXRsZTtcblxuICAgICAgY29uc3QgY2FydERlc2NyaXB0aW9uUHJpY2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICBjYXJ0RGVzY3JpcHRpb25QcmljZS5jbGFzc0xpc3QuYWRkKCdjYXJ0X19pdGVtLXByaWNlJyk7XG4gICAgICBjYXJ0RGVzY3JpcHRpb25QcmljZS50ZXh0Q29udGVudCA9IGl0ZW0ucHJpY2UgKyAnIOKCvSc7XG5cbiAgICAgIGNvbnN0IGNhcnRJdGVtQm90dG9tID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICAgIGNhcnRJdGVtQm90dG9tLmNsYXNzTGlzdC5hZGQoJ2NhcnRfX2l0ZW0tYm90dG9tJyk7XG5cbiAgICAgIGNvbnN0IGNhcnRJdGVtQnRucyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgY2FydEl0ZW1CdG5zLmNsYXNzTGlzdC5hZGQoJ2NhcnRfX2l0ZW0tYnRucycpO1xuXG4gICAgICBjb25zdCBjYXJ0QnRuTWludXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgIGNhcnRCdG5NaW51cy5jbGFzc0xpc3QuYWRkKCdjYXJ0X19idG4tc3VtJywgJ2NhcnRfX2J0bi1zdW0tLW1pbnVzJyk7XG5cbiAgICAgIGNvbnN0IGNhcnRRdWFudGl0eSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgIGNhcnRRdWFudGl0eS5jbGFzc0xpc3QuYWRkKCdjYXJ0X19xdWFudGl0eScpO1xuICAgICAgY2FydFF1YW50aXR5LnRleHRDb250ZW50ID0gaXRlbS5zdW07XG5cbiAgICAgIGNvbnN0IGNhcnRCdG5QbHVzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICBjYXJ0QnRuUGx1cy5jbGFzc0xpc3QuYWRkKCdjYXJ0X19idG4tc3VtJywgJ2NhcnRfX2J0bi1zdW0tLXBsdXMnKTtcblxuICAgICAgY29uc3QgY2FydEl0ZW1SZXN1bHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICBjYXJ0SXRlbVJlc3VsdC5jbGFzc0xpc3QuYWRkKCdjYXJ0X19pdGVtLXJlc3VsdCcpO1xuICAgICAgY2FydEl0ZW1SZXN1bHQudGV4dENvbnRlbnQgPSBpdGVtLnByaWNlICsgJyDigr0nO1xuXG4gICAgICBjb25zdCBkZWxldGVCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgIGRlbGV0ZUJ0bi5jbGFzc0xpc3QuYWRkKCdjYXJ0X19pdGVtLWRlbCcpO1xuXG4gICAgICBjb25zdCBzdmdEZWxldGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIHN2Z0RlbGV0ZS5jbGFzc0xpc3QuYWRkKCdjYXJ0X190cmFzaCcpO1xuXG4gICAgICBjb25zdCB1c2VEZWxldGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICAgIHVzZURlbGV0ZS5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpbWFnZXMvc3ByaXRlLnN2ZyN0cmFzaCcpO1xuXG4gICAgICBjYXJ0QnRuTWludXMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGlmIChpdGVtLnN1bSA8PSAxKSB7XG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2FydFF1YW50aXR5LnRleHRDb250ZW50ID0gaXRlbS5zdW0gLSAxO1xuICAgICAgICAgIGNhcnRTdG9yYWdlQXJyYXlbaW5kZXhdLnN1bSA9IGl0ZW0uc3VtIC0gMTtcbiAgICAgICAgICB3aW5kb3cuc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnY2FydCcsIEpTT04uc3RyaW5naWZ5KGNhcnRTdG9yYWdlQXJyYXkpKTtcbiAgICAgICAgICBjYXJ0SXRlbVJlc3VsdC50ZXh0Q29udGVudCA9IGl0ZW0ucHJpY2UgKiBOdW1iZXIoY2FydFF1YW50aXR5LnRleHRDb250ZW50KSArICcg4oK9JztcbiAgICAgICAgfVxuICAgICAgICByZXN1bHRGdW5jdGlvbigpXG4gICAgICB9KTtcblxuICAgICAgY2FydEJ0blBsdXMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGNhcnRRdWFudGl0eS50ZXh0Q29udGVudCA9IGl0ZW0uc3VtICsgMTtcbiAgICAgICAgY2FydFN0b3JhZ2VBcnJheVtpbmRleF0uc3VtID0gaXRlbS5zdW0gKyAxO1xuICAgICAgICB3aW5kb3cuc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnY2FydCcsIEpTT04uc3RyaW5naWZ5KGNhcnRTdG9yYWdlQXJyYXkpKTtcbiAgICAgICAgY2FydEl0ZW1SZXN1bHQudGV4dENvbnRlbnQgPSBpdGVtLnByaWNlICogTnVtYmVyKGNhcnRRdWFudGl0eS50ZXh0Q29udGVudCkgKyAnIOKCvSc7XG4gICAgICAgIHJlc3VsdEZ1bmN0aW9uKClcbiAgICAgIH0pXG5cbiAgICAgIGRlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZGVsZXRlIGNhcnRTdG9yYWdlQXJyYXlbaW5kZXhdO1xuICAgICAgICB3aW5kb3cuc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnY2FydCcsIEpTT04uc3RyaW5naWZ5KGNhcnRTdG9yYWdlQXJyYXkpKTtcbiAgICAgICAgY2FydEl0ZW0ucmVtb3ZlKClcbiAgICAgICAgcmVzdWx0RnVuY3Rpb24oKVxuICAgICAgfSlcblxuICAgICAgY2FydEl0ZW1Ub3AuYXBwZW5kKGNhcnRJbWcpO1xuICAgICAgY2FydEl0ZW1Ub3AuYXBwZW5kKGNhcnREZXNjcmlwdGlvbik7XG4gICAgICBjYXJ0RGVzY3JpcHRpb24uYXBwZW5kKGNhcnREZXNjcmlwdGlvblRleHQpO1xuICAgICAgY2FydERlc2NyaXB0aW9uLmFwcGVuZChjYXJ0RGVzY3JpcHRpb25QcmljZSk7XG4gICAgICBjYXJ0SXRlbUJvdHRvbS5hcHBlbmQoY2FydEl0ZW1CdG5zKTtcbiAgICAgIGNhcnRJdGVtQnRucy5hcHBlbmQoY2FydEJ0bk1pbnVzKTtcbiAgICAgIGNhcnRJdGVtQnRucy5hcHBlbmQoY2FydFF1YW50aXR5KTtcbiAgICAgIGNhcnRJdGVtQnRucy5hcHBlbmQoY2FydEJ0blBsdXMpO1xuICAgICAgY2FydEl0ZW1Cb3R0b20uYXBwZW5kKGNhcnRJdGVtUmVzdWx0KTtcblxuICAgICAgZGVsZXRlQnRuLmFwcGVuZChzdmdEZWxldGUpO1xuICAgICAgc3ZnRGVsZXRlLmFwcGVuZCh1c2VEZWxldGUpO1xuXG4gICAgICBjYXJ0SXRlbS5hcHBlbmQoY2FydEl0ZW1Ub3ApO1xuICAgICAgY2FydEl0ZW0uYXBwZW5kKGNhcnRJdGVtQm90dG9tKTtcbiAgICAgIGNhcnRJdGVtLmFwcGVuZChkZWxldGVCdG4pO1xuICAgICAgY29udGFpbmVyLmFwcGVuZChjYXJ0SXRlbSk7XG4gICAgICByZXN1bHRGdW5jdGlvbigpXG4gICAgfSlcblxuICAgIGZ1bmN0aW9uIHJlc3VsdEZ1bmN0aW9uKCkge1xuICAgICAgY29uc3QgcmVzdWx0U3VtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhcnRfX3Jlc3VsdC1zdW0nKVxuICAgICAgY29uc3QgaXRlbVJlc3VsdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXJ0X19pdGVtLXJlc3VsdCcpO1xuICAgICAgbGV0IHN1bVJlc3VsdCA9IDA7XG4gICAgICBpdGVtUmVzdWx0LmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgIHN1bVJlc3VsdCA9IHN1bVJlc3VsdCArIE51bWJlcihpdGVtLnRleHRDb250ZW50LnJlcGxhY2UoJ+KCvScsICcnKSk7XG4gICAgICB9KVxuXG4gICAgICByZXN1bHRTdW0udGV4dENvbnRlbnQgPSAn4oK9ICcgKyBzdW1SZXN1bHRcbiAgICB9XG4gIH1cblxuICBjb25zdCBmb3JtU3VibWl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhcnRfX3N1Ym1pdCcpO1xuXG4gIGZvcm1TdWJtaXQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBsZXQgZnVsbFByaWNlID0gMDtcbiAgICBjb25zdCBjYXJ0SXRlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXJ0X19pdGVtJyk7XG4gICAgY29uc3QgY2FydEljb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19jYXJ0LXN1bScpO1xuICAgIGNvbnNvbGUubG9nKCfQpNC+0YDQvNCwINC+0YLQv9GA0LDQstC70LXQvdCwINGBINGC0L7QstCw0YDQsNC80Lg6Jyk7XG4gICAgY2FydFN0b3JhZ2VBcnJheS5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgY29uc29sZS5sb2coaXRlbS50aXRsZSArICc6ICcgKyBpdGVtLnN1bSArICfRiNGCLiDQvdCwINGB0YPQvNC80YMgJyArIChpdGVtLnByaWNlICogaXRlbS5zdW0pICsgJyDigr0nKVxuICAgICAgZnVsbFByaWNlID0gZnVsbFByaWNlICsgKGl0ZW0uc3VtICogaXRlbS5wcmljZSk7XG4gICAgfSlcbiAgICBjb25zb2xlLmxvZygn0JjRgtC+0LM6ICcgKyBmdWxsUHJpY2UgKyAnIOKCvScpO1xuICAgIGNhcnRJdGVtLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICBpdGVtLnJlbW92ZSgpO1xuICAgIH0pXG4gICAgY29uc3QgbWVzc2FnZU51bGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgbWVzc2FnZU51bGwudGV4dENvbnRlbnQgPSAn0JrQvtGA0LfQuNC90LAg0L/Rg9GB0YLQsCdcbiAgICBtZXNzYWdlTnVsbC5jbGFzc0xpc3QuYWRkKCdjYXJ0X19ub25lJyk7XG4gICAgY29udGFpbmVyLmFwcGVuZChtZXNzYWdlTnVsbClcbiAgICBjYXJ0SWNvbi50ZXh0Q29udGVudCA9IDA7XG4gICAgY2FydFJlc3VsdFN1bS50ZXh0Q29udGVudCA9ICcwIOKCvSc7XG4gICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbSgnY2FydCcpO1xuICB9KVxufVxuIl19
